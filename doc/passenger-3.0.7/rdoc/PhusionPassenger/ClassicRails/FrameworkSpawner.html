<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: PhusionPassenger::ClassicRails::FrameworkSpawner</title>

  <link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

  <script src="../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../../lib/phusion_passenger/classic_rails/framework_spawner_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/phusion_passenger/classic_rails/framework_spawner.rb">lib/phusion_passenger/classic_rails/framework_spawner.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">AbstractServer</p>
        
      </div>
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">CLASS</span> <a href="FrameworkSpawner/Error.html">PhusionPassenger::ClassicRails::FrameworkSpawner::Error</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-reload">#reload</a></li>
          
          <li><a href="#method-i-spawn_application">#spawn_application</a></li>
          
          <li><a href="#method-i-start">#start</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><a class="include" href="../Utils.html">PhusionPassenger::Utils</a></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../../README.html">README</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../../PhusionPassenger.html">PhusionPassenger</a></li>
        
          <li><a href="../../PhusionPassenger/AbstractInstaller.html">PhusionPassenger::AbstractInstaller</a></li>
        
          <li><a href="../../PhusionPassenger/AbstractRequestHandler.html">PhusionPassenger::AbstractRequestHandler</a></li>
        
          <li><a href="../../PhusionPassenger/AbstractServer.html">PhusionPassenger::AbstractServer</a></li>
        
          <li><a href="../../PhusionPassenger/AbstractServer/InvalidPassword.html">PhusionPassenger::AbstractServer::InvalidPassword</a></li>
        
          <li><a href="../../PhusionPassenger/AbstractServer/ServerAlreadyStarted.html">PhusionPassenger::AbstractServer::ServerAlreadyStarted</a></li>
        
          <li><a href="../../PhusionPassenger/AbstractServer/ServerError.html">PhusionPassenger::AbstractServer::ServerError</a></li>
        
          <li><a href="../../PhusionPassenger/AbstractServer/ServerNotStarted.html">PhusionPassenger::AbstractServer::ServerNotStarted</a></li>
        
          <li><a href="../../PhusionPassenger/AbstractServer/UnknownMessage.html">PhusionPassenger::AbstractServer::UnknownMessage</a></li>
        
          <li><a href="../../PhusionPassenger/AbstractServerCollection.html">PhusionPassenger::AbstractServerCollection</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools.html">PhusionPassenger::AdminTools</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools/MemoryStats.html">PhusionPassenger::AdminTools::MemoryStats</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools/MemoryStats/Process.html">PhusionPassenger::AdminTools::MemoryStats::Process</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools/ServerInstance.html">PhusionPassenger::AdminTools::ServerInstance</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools/ServerInstance/CorruptedDirectoryError.html">PhusionPassenger::AdminTools::ServerInstance::CorruptedDirectoryError</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools/ServerInstance/GenerationsAbsentError.html">PhusionPassenger::AdminTools::ServerInstance::GenerationsAbsentError</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools/ServerInstance/Group.html">PhusionPassenger::AdminTools::ServerInstance::Group</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools/ServerInstance/Process.html">PhusionPassenger::AdminTools::ServerInstance::Process</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools/ServerInstance/RoleDeniedError.html">PhusionPassenger::AdminTools::ServerInstance::RoleDeniedError</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools/ServerInstance/StaleDirectoryError.html">PhusionPassenger::AdminTools::ServerInstance::StaleDirectoryError</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools/ServerInstance/Stats.html">PhusionPassenger::AdminTools::ServerInstance::Stats</a></li>
        
          <li><a href="../../PhusionPassenger/AdminTools/ServerInstance/UnsupportedGenerationStructureVersionError.html">PhusionPassenger::AdminTools::ServerInstance::UnsupportedGenerationStructureVersionError</a></li>
        
          <li><a href="../../PhusionPassenger/AnalyticsLogger.html">PhusionPassenger::AnalyticsLogger</a></li>
        
          <li><a href="../../PhusionPassenger/AnalyticsLogger/Lock.html">PhusionPassenger::AnalyticsLogger::Lock</a></li>
        
          <li><a href="../../PhusionPassenger/AnalyticsLogger/Log.html">PhusionPassenger::AnalyticsLogger::Log</a></li>
        
          <li><a href="../../PhusionPassenger/AnalyticsLogger/SharedData.html">PhusionPassenger::AnalyticsLogger::SharedData</a></li>
        
          <li><a href="../../PhusionPassenger/AppInitError.html">PhusionPassenger::AppInitError</a></li>
        
          <li><a href="../../PhusionPassenger/AppProcess.html">PhusionPassenger::AppProcess</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRails.html">PhusionPassenger::ClassicRails</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRails/ApplicationSpawner.html">PhusionPassenger::ClassicRails::ApplicationSpawner</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRails/ApplicationSpawner/Error.html">PhusionPassenger::ClassicRails::ApplicationSpawner::Error</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRails/CGIFixed.html">PhusionPassenger::ClassicRails::CGIFixed</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRails/FrameworkSpawner.html">PhusionPassenger::ClassicRails::FrameworkSpawner</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRails/FrameworkSpawner/Error.html">PhusionPassenger::ClassicRails::FrameworkSpawner::Error</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRails/RequestHandler.html">PhusionPassenger::ClassicRails::RequestHandler</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRailsExtensions.html">PhusionPassenger::ClassicRailsExtensions</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/ACBaseExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::ACBaseExtension</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/ACBenchmarkingExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::ACBenchmarkingExtension</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/ACRescueExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::ACRescueExtension</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/ARAbstractAdapterExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::ARAbstractAdapterExtension</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/AVBenchmarkHelperExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::AVBenchmarkHelperExtension</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/CacheStoreExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::CacheStoreExtension</a></li>
        
          <li><a href="../../PhusionPassenger/ClassicRailsExtensions/AnalyticsLogging/ConcreteCacheStoreExtension.html">PhusionPassenger::ClassicRailsExtensions::AnalyticsLogging::ConcreteCacheStoreExtension</a></li>
        
          <li><a href="../../PhusionPassenger/ConsoleTextTemplate.html">PhusionPassenger::ConsoleTextTemplate</a></li>
        
          <li><a href="../../PhusionPassenger/DebugLogging.html">PhusionPassenger::DebugLogging</a></li>
        
          <li><a href="../../PhusionPassenger/FrameworkInitError.html">PhusionPassenger::FrameworkInitError</a></li>
        
          <li><a href="../../PhusionPassenger/HTMLTemplate.html">PhusionPassenger::HTMLTemplate</a></li>
        
          <li><a href="../../PhusionPassenger/InitializationError.html">PhusionPassenger::InitializationError</a></li>
        
          <li><a href="../../PhusionPassenger/InvalidPath.html">PhusionPassenger::InvalidPath</a></li>
        
          <li><a href="../../PhusionPassenger/MessageChannel.html">PhusionPassenger::MessageChannel</a></li>
        
          <li><a href="../../PhusionPassenger/MessageChannel/InvalidHashError.html">PhusionPassenger::MessageChannel::InvalidHashError</a></li>
        
          <li><a href="../../PhusionPassenger/MessageClient.html">PhusionPassenger::MessageClient</a></li>
        
          <li><a href="../../PhusionPassenger/NativeSupportLoader.html">PhusionPassenger::NativeSupportLoader</a></li>
        
          <li><a href="../../PhusionPassenger/Packaging.html">PhusionPassenger::Packaging</a></li>
        
          <li><a href="../../PhusionPassenger/PlatformInfo.html">PhusionPassenger::PlatformInfo</a></li>
        
          <li><a href="../../PhusionPassenger/PlatformInfo/RuntimeError.html">PhusionPassenger::PlatformInfo::RuntimeError</a></li>
        
          <li><a href="../../PhusionPassenger/Plugin.html">PhusionPassenger::Plugin</a></li>
        
          <li><a href="../../PhusionPassenger/Rack.html">PhusionPassenger::Rack</a></li>
        
          <li><a href="../../PhusionPassenger/Rack/ApplicationSpawner.html">PhusionPassenger::Rack::ApplicationSpawner</a></li>
        
          <li><a href="../../PhusionPassenger/Rack/ApplicationSpawner/Error.html">PhusionPassenger::Rack::ApplicationSpawner::Error</a></li>
        
          <li><a href="../../PhusionPassenger/Rack/RequestHandler.html">PhusionPassenger::Rack::RequestHandler</a></li>
        
          <li><a href="../../PhusionPassenger/Rails3Extensions.html">PhusionPassenger::Rails3Extensions</a></li>
        
          <li><a href="../../PhusionPassenger/Rails3Extensions/AnalyticsLogging.html">PhusionPassenger::Rails3Extensions::AnalyticsLogging</a></li>
        
          <li><a href="../../PhusionPassenger/Rails3Extensions/AnalyticsLogging/ACExtension.html">PhusionPassenger::Rails3Extensions::AnalyticsLogging::ACExtension</a></li>
        
          <li><a href="../../PhusionPassenger/Rails3Extensions/AnalyticsLogging/ASBenchmarkableExtension.html">PhusionPassenger::Rails3Extensions::AnalyticsLogging::ASBenchmarkableExtension</a></li>
        
          <li><a href="../../PhusionPassenger/Rails3Extensions/AnalyticsLogging/ExceptionLogger.html">PhusionPassenger::Rails3Extensions::AnalyticsLogging::ExceptionLogger</a></li>
        
          <li><a href="../../PhusionPassenger/SpawnManager.html">PhusionPassenger::SpawnManager</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone.html">PhusionPassenger::Standalone</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/AppFinder.html">PhusionPassenger::Standalone::AppFinder</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/Command.html">PhusionPassenger::Standalone::Command</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/ConfigFile.html">PhusionPassenger::Standalone::ConfigFile</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/ConfigFile/DisallowedContextError.html">PhusionPassenger::Standalone::ConfigFile::DisallowedContextError</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/HelpCommand.html">PhusionPassenger::Standalone::HelpCommand</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/Main.html">PhusionPassenger::Standalone::Main</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/PackageRuntimeCommand.html">PhusionPassenger::Standalone::PackageRuntimeCommand</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/RuntimeInstaller.html">PhusionPassenger::Standalone::RuntimeInstaller</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/StartCommand.html">PhusionPassenger::Standalone::StartCommand</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/StatusCommand.html">PhusionPassenger::Standalone::StatusCommand</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/StopCommand.html">PhusionPassenger::Standalone::StopCommand</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/Utils.html">PhusionPassenger::Standalone::Utils</a></li>
        
          <li><a href="../../PhusionPassenger/Standalone/VersionCommand.html">PhusionPassenger::Standalone::VersionCommand</a></li>
        
          <li><a href="../../PhusionPassenger/UnknownError.html">PhusionPassenger::UnknownError</a></li>
        
          <li><a href="../../PhusionPassenger/Utils.html">PhusionPassenger::Utils</a></li>
        
          <li><a href="../../PhusionPassenger/Utils/FileSystemWatcher.html">PhusionPassenger::Utils::FileSystemWatcher</a></li>
        
          <li><a href="../../PhusionPassenger/Utils/FileSystemWatcher/DirInfo.html">PhusionPassenger::Utils::FileSystemWatcher::DirInfo</a></li>
        
          <li><a href="../../PhusionPassenger/Utils/FileSystemWatcher/FileInfo.html">PhusionPassenger::Utils::FileSystemWatcher::FileInfo</a></li>
        
          <li><a href="../../PhusionPassenger/Utils/HostsFileParser.html">PhusionPassenger::Utils::HostsFileParser</a></li>
        
          <li><a href="../../PhusionPassenger/Utils/Kernel.html">PhusionPassenger::Utils::Kernel</a></li>
        
          <li><a href="../../PhusionPassenger/Utils/PseudoIO.html">PhusionPassenger::Utils::PseudoIO</a></li>
        
          <li><a href="../../PhusionPassenger/Utils/RewindableInput.html">PhusionPassenger::Utils::RewindableInput</a></li>
        
          <li><a href="../../PhusionPassenger/Utils/RewindableInput/Tempfile.html">PhusionPassenger::Utils::RewindableInput::Tempfile</a></li>
        
          <li><a href="../../PhusionPassenger/Utils/UnseekableSocket.html">PhusionPassenger::Utils::UnseekableSocket</a></li>
        
          <li><a href="../../PhusionPassenger/VersionNotFound.html">PhusionPassenger::VersionNotFound</a></li>
        
          <li><a href="../../PhusionPassenger/WSGI.html">PhusionPassenger::WSGI</a></li>
        
          <li><a href="../../PhusionPassenger/WSGI/ApplicationSpawner.html">PhusionPassenger::WSGI::ApplicationSpawner</a></li>
        
          <li><a href="../../ConditionVariable.html">ConditionVariable</a></li>
        
          <li><a href="../../Exception.html">Exception</a></li>
        
          <li><a href="../../GC.html">GC</a></li>
        
          <li><a href="../../IO.html">IO</a></li>
        
          <li><a href="../../Object.html">Object</a></li>
        
          <li><a href="../../Process.html">Process</a></li>
        
          <li><a href="../../Signal.html">Signal</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">PhusionPassenger::ClassicRails::FrameworkSpawner</h1>

    <div id="description" class="description">
      
<p>This class is capable of spawning Ruby on Rails application instances
quickly. This is done by preloading the Ruby on Rails framework into
memory, before spawning the application instances.</p>

<p>A single <a href="FrameworkSpawner.html">FrameworkSpawner</a> instance can
only hold a single Ruby on Rails framework version. So be careful when
using FrameworkSpawner: the applications that you spawn through it must
require the same RoR version. To handle multiple RoR versions, use multiple
<a href="FrameworkSpawner.html">FrameworkSpawner</a> instances.</p>

<p><a href="FrameworkSpawner.html">FrameworkSpawner</a> uses <a
href="ApplicationSpawner.html">ApplicationSpawner</a> internally.</p>

<p><b>Note</b>: <a href="FrameworkSpawner.html">FrameworkSpawner</a> may only
be started asynchronously with <a
href="../AbstractServer.html#method-i-start">AbstractServer#start</a>.
Starting it synchronously with <a
href="../AbstractServer.html#method-i-start_synchronously">AbstractServer#start_synchronously</a>
has not been tested.</p>

    </div><!-- description -->

    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(options = {})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates a new instance of <a
href="FrameworkSpawner.html">FrameworkSpawner</a>.</p>

<p>Extra supported options:</p>
<ul><li>
<p><tt>framework_version</tt>: The Ruby on Rails version to use. It is not
checked whether this version is actually installed.</p>
</li></ul>

<p>All other options will be passed on to <a
href="ApplicationSpawner.html">ApplicationSpawner</a> and <a
href="RequestHandler.html">RequestHandler</a>.</p>

<p>Note that the specified Rails framework will be loaded during the entire
life time of the <a href="FrameworkSpawner.html">FrameworkSpawner</a>
server. If you wish to reload the Rails framework’s code, then restart
the server by calling <a
href="../AbstractServer.html#method-i-stop">AbstractServer#stop</a> and <a
href="../AbstractServer.html#method-i-start">AbstractServer#start</a>.</p>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/phusion_passenger/classic_rails/framework_spawner.rb, line 66</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span> = {})
        <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:'[]'</span>)
                <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;The 'options' argument does not seem to be an options hash&quot;</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-ivar">@framework_version</span> = <span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;framework_version&quot;</span>]
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;print_framework_loading_exceptions&quot;</span>)
                <span class="ruby-ivar">@print_framework_loading_exceptions</span> = <span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;print_framework_loading_exceptions&quot;</span>]
        <span class="ruby-keyword">else</span>
                <span class="ruby-ivar">@print_framework_loading_exceptions</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@framework_version</span>
                <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;The 'framework_version' option must specified&quot;</span>
        <span class="ruby-keyword">end</span>
        
        <span class="ruby-keyword">super</span>()
        <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">options</span>
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">max_idle_time</span> = <span class="ruby-constant">DEFAULT_FRAMEWORK_SPAWNER_MAX_IDLE_TIME</span>
        <span class="ruby-identifier">define_message_handler</span>(<span class="ruby-value">:spawn_application</span>, <span class="ruby-value">:handle_spawn_application</span>)
        <span class="ruby-identifier">define_message_handler</span>(<span class="ruby-value">:reload</span>, <span class="ruby-value">:handle_reload</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="reload-method" class="method-detail ">
          <a name="method-i-reload"></a>

          
          <div class="method-heading">
            <span class="method-name">reload</span><span
              class="method-args">(app_group_name = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Remove the cached application instances at the given group name. If nil is
specified as group name, then all cached application instances will be
removed, no matter the group name.</p>

<p><b>Long description:</b> Application code might be cached in memory by a <a
href="FrameworkSpawner.html">FrameworkSpawner</a>. But once it a while, it
will be necessary to reload the code for an application, such as after
deploying a new version of the application. This method makes sure that any
cached application code is removed, so that the next time an application
instance is spawned, the application code will be freshly loaded into
memory.</p>

<p>Raises:</p>
<ul><li>
<p>FrameworkSpawner::Error: The <a
href="FrameworkSpawner.html">FrameworkSpawner</a> server exited
unexpectedly.</p>
</li></ul>
            

            
            <div class="method-source-code" id="reload-source">
<pre>
<span class="ruby-comment"># File lib/phusion_passenger/classic_rails/framework_spawner.rb, line 188</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reload</span>(<span class="ruby-identifier">app_group_name</span> = <span class="ruby-keyword">nil</span>)
        <span class="ruby-identifier">connect</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">channel</span><span class="ruby-operator">|</span>
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">app_group_name</span>.<span class="ruby-identifier">nil?</span>
                        <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">write</span>(<span class="ruby-string">&quot;reload&quot;</span>)
                <span class="ruby-keyword">else</span>
                        <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">write</span>(<span class="ruby-string">&quot;reload&quot;</span>, <span class="ruby-identifier">app_group_name</span>)
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>, <span class="ruby-constant">IOError</span>, <span class="ruby-constant">SocketError</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;The framework spawner server exited unexpectedly: #{e}&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- reload-source -->
            
          </div>

          

          
        </div><!-- reload-method -->

      
        <div id="spawn_application-method" class="method-detail ">
          <a name="method-i-spawn_application"></a>

          
          <div class="method-heading">
            <span class="method-name">spawn_application</span><span
              class="method-args">(options = {})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Spawn a RoR application using the Ruby on Rails framework version
associated with this <a href="FrameworkSpawner.html">FrameworkSpawner</a>.
When successful, an Application object will be returned, which represents
the spawned RoR application.</p>

<p>All options accepted by <a
href="ApplicationSpawner.html#method-c-new">ApplicationSpawner.new</a> and
<a href="RequestHandler.html#method-c-new">RequestHandler.new</a> are
accepted.</p>

<p><a href="FrameworkSpawner.html">FrameworkSpawner</a> will internally cache
the code of applications, in order to speed up future spawning attempts.
This implies that, if you’ve changed the application’s code, you must
do one of these things:</p>
<ul><li>
<p>Restart this <a href="FrameworkSpawner.html">FrameworkSpawner</a> by
calling <a
href="../AbstractServer.html#method-i-stop">AbstractServer#stop</a>, then
<a href="../AbstractServer.html#method-i-start">AbstractServer#start</a>.</p>
</li><li>
<p>Reload the application by calling reload with the correct app_root
argument.</p>
</li></ul>

<p>Raises:</p>
<ul><li>
<p>AbstractServer::ServerNotStarted: The <a
href="FrameworkSpawner.html">FrameworkSpawner</a> server hasn’t already
been started.</p>
</li><li>
<p>AppInitError: The application raised an exception or called exit() during
startup.</p>
</li><li>
<p>ApplicationSpawner::Error: The <a
href="ApplicationSpawner.html">ApplicationSpawner</a> server exited
unexpectedly.</p>
</li><li>
<p>FrameworkSpawner::Error: The <a
href="FrameworkSpawner.html">FrameworkSpawner</a> server exited
unexpectedly.</p>
</li></ul>
            

            
            <div class="method-source-code" id="spawn_application-source">
<pre>
<span class="ruby-comment"># File lib/phusion_passenger/classic_rails/framework_spawner.rb, line 140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">spawn_application</span>(<span class="ruby-identifier">options</span> = {})
        <span class="ruby-identifier">app_root</span> = <span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;app_root&quot;</span>]
        <span class="ruby-identifier">options</span> = <span class="ruby-identifier">sanitize_spawn_options</span>(<span class="ruby-identifier">options</span>)
        <span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;app_root&quot;</span>] = <span class="ruby-identifier">app_root</span>
        <span class="ruby-comment"># No need for the ApplicationSpawner to print exceptions. All</span>
        <span class="ruby-comment"># exceptions raised by the ApplicationSpawner are sent back here,</span>
        <span class="ruby-comment"># so we just need to decide here whether we want to print it.</span>
        <span class="ruby-identifier">print_exceptions</span> = <span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;print_exceptions&quot;</span>]
        <span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;print_exceptions&quot;</span>] = <span class="ruby-keyword">false</span>
        
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">connect</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">channel</span><span class="ruby-operator">|</span>
                        <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">write</span>(<span class="ruby-string">&quot;spawn_application&quot;</span>, *<span class="ruby-identifier">options</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">flatten</span>)
                        <span class="ruby-identifier">result</span> = <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">read</span>
                        <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">nil?</span>
                                <span class="ruby-identifier">raise</span> <span class="ruby-constant">IOError</span>, <span class="ruby-string">&quot;Connection closed&quot;</span>
                        <span class="ruby-keyword">end</span>
                        <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-string">'exception'</span>
                                <span class="ruby-identifier">e</span> = <span class="ruby-identifier">unmarshal_exception</span>(<span class="ruby-identifier">channel</span>.<span class="ruby-identifier">read_scalar</span>)
                                <span class="ruby-keyword">if</span> <span class="ruby-identifier">print_exceptions</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:child_exception</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">child_exception</span>
                                        <span class="ruby-identifier">print_exception</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">child_exception</span>)
                                <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">print_exceptions</span>
                                        <span class="ruby-identifier">print_exception</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">e</span>)
                                <span class="ruby-keyword">end</span>
                                <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
                        <span class="ruby-keyword">else</span>
                                <span class="ruby-keyword">return</span> <span class="ruby-constant">AppProcess</span>.<span class="ruby-identifier">read_from_channel</span>(<span class="ruby-identifier">channel</span>)
                        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">rescue</span> <span class="ruby-constant">SystemCallError</span>, <span class="ruby-constant">IOError</span>, <span class="ruby-constant">SocketError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
                <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;The framework spawner server exited unexpectedly: #{e}&quot;</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- spawn_application-source -->
            
          </div>

          

          
        </div><!-- spawn_application-method -->

      
        <div id="start-method" class="method-detail ">
          <a name="method-i-start"></a>

          
          <div class="method-heading">
            <span class="method-name">start</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Overrided from <a
href="../AbstractServer.html#method-i-start">AbstractServer#start</a>.</p>

<p>May raise these additional exceptions:</p>
<ul><li>
<p>FrameworkInitError: An error occurred while loading the specified Ruby on
Rails framework.</p>
</li><li>
<p>FrameworkSpawner::Error: The <a
href="FrameworkSpawner.html">FrameworkSpawner</a> server exited
unexpectedly.</p>
</li></ul>
            

            
            <div class="method-source-code" id="start-source">
<pre>
<span class="ruby-comment"># File lib/phusion_passenger/classic_rails/framework_spawner.rb, line 92</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">start</span>
        <span class="ruby-keyword">super</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">channel</span> = <span class="ruby-constant">MessageChannel</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@owner_socket</span>)
                <span class="ruby-identifier">result</span> = <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">read</span>
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">nil?</span>
                        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;The framework spawner server exited unexpectedly.&quot;</span>
                <span class="ruby-keyword">else</span>
                        <span class="ruby-identifier">status</span> = <span class="ruby-identifier">result</span>[<span class="ruby-value">0</span>]
                <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">status</span> <span class="ruby-operator">==</span> <span class="ruby-string">'exception'</span>
                        <span class="ruby-identifier">child_exception</span> = <span class="ruby-identifier">unmarshal_exception</span>(<span class="ruby-identifier">channel</span>.<span class="ruby-identifier">read_scalar</span>)
                        <span class="ruby-identifier">stop</span>
                        <span class="ruby-identifier">message</span> = <span class="ruby-node">&quot;Could not load Ruby on Rails framework version #{@framework_version}: &quot;</span> <span class="ruby-operator">&lt;&lt;</span>
                                <span class="ruby-node">&quot;#{child_exception.class} (#{child_exception.message})&quot;</span>
                        <span class="ruby-identifier">options</span> = { <span class="ruby-value">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@framework_version</span> }
                        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@print_framework_loading_exceptions</span>
                                <span class="ruby-identifier">print_exception</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">child_exception</span>)
                        <span class="ruby-keyword">end</span>
                        <span class="ruby-identifier">raise</span> <span class="ruby-constant">FrameworkInitError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">message</span>, <span class="ruby-identifier">child_exception</span>, <span class="ruby-identifier">options</span>)
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">rescue</span> <span class="ruby-constant">IOError</span>, <span class="ruby-constant">SystemCallError</span>, <span class="ruby-constant">SocketError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
                <span class="ruby-identifier">stop</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">started?</span>
                <span class="ruby-identifier">raise</span> <span class="ruby-constant">Error</span>, <span class="ruby-node">&quot;The framework spawner server exited unexpectedly: #{e}&quot;</span>
        <span class="ruby-keyword">rescue</span>
                <span class="ruby-identifier">stop</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">started?</span>
                <span class="ruby-identifier">raise</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- start-source -->
            
          </div>

          

          
        </div><!-- start-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

